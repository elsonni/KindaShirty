<!-- /partials/scripts.html -->
<script defer>
(function () {
  async function includePartials() {
    const nodes = document.querySelectorAll('[data-include]');
    await Promise.all(Array.from(nodes).map(async (n) => {
      const path = n.getAttribute('data-include');
      const res = await fetch(path, { cache: 'force-cache' });
      if (!res.ok) return;
      n.outerHTML = await res.text();
    }));
    // Re-dispatch DOMContentLoaded so components that depend on the includes can init.
    document.dispatchEvent(new Event('ks:partials:ready'));
  }
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', includePartials);
  } else {
    includePartials();
  }
})();
</script>
<script src="/js/site.js" defer></script>

<!-- Conditionally loaded libraries: kept here so they stay centralized -->
<!-- Square: only inject on checkout page from main.js (see below) -->
<!-- Any analytics: include here once -->
